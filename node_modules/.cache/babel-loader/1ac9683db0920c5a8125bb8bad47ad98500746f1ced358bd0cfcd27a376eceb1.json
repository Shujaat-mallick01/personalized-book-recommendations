{"ast":null,"code":"import _objectSpread from\"C:/Users/T K/Desktop/personalized-book-recommendations/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const GOOGLE_BOOKS_API_KEY=process.env.REACT_APP_GOOGLE_BOOKS_API_KEY;const BASE_URL='https://www.googleapis.com/books/v1/volumes';const normalizeBookData=apiBook=>{var _volumeInfo$imageLink,_volumeInfo$industryI,_volumeInfo$industryI2;const volumeInfo=apiBook.volumeInfo||{};return{id:apiBook.id,title:volumeInfo.title||'Unknown Title',authors:volumeInfo.authors||['Unknown Author'],description:volumeInfo.description||'',publishedDate:volumeInfo.publishedDate||'',pageCount:volumeInfo.pageCount||0,categories:volumeInfo.categories||[],averageRating:volumeInfo.averageRating||0,ratingsCount:volumeInfo.ratingsCount||0,thumbnail:((_volumeInfo$imageLink=volumeInfo.imageLinks)===null||_volumeInfo$imageLink===void 0?void 0:_volumeInfo$imageLink.thumbnail)||null,previewLink:volumeInfo.previewLink||'',infoLink:volumeInfo.infoLink||'',isbn:((_volumeInfo$industryI=volumeInfo.industryIdentifiers)===null||_volumeInfo$industryI===void 0?void 0:(_volumeInfo$industryI2=_volumeInfo$industryI[0])===null||_volumeInfo$industryI2===void 0?void 0:_volumeInfo$industryI2.identifier)||''};};export const searchBooks=async function(query){let maxResults=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;try{const params=new URLSearchParams(_objectSpread({q:query,maxResults:Math.min(maxResults,40),orderBy:'relevance',printType:'books'},GOOGLE_BOOKS_API_KEY&&{key:GOOGLE_BOOKS_API_KEY}));const response=await fetch(\"\".concat(BASE_URL,\"?\").concat(params));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();if(!data.items||data.items.length===0){return[];}return data.items.filter(item=>item.volumeInfo).map(item=>normalizeBookData(item)).filter(book=>book.title&&book.authors.length>0);}catch(error){console.error('Error searching books:',error);throw new Error('Failed to search books. Please try again later.');}};export const getPopularBooks=async function(){let maxResults=arguments.length>0&&arguments[0]!==undefined?arguments[0]:20;try{const popularQueries=['bestseller fiction','popular books 2024','award winning books','new york times bestseller'];const allBooks=[];for(const query of popularQueries){try{const books=await searchBooks(query,10);allBooks.push(...books);if(allBooks.length>=maxResults)break;}catch(error){console.log(\"Failed to fetch books for query: \".concat(query));}}const uniqueBooks=allBooks.filter((book,index,self)=>self.findIndex(b=>b.id===book.id)===index);return uniqueBooks.slice(0,maxResults);}catch(error){console.error('Error getting popular books:',error);throw new Error('Failed to load popular books. Please try again later.');}};","map":{"version":3,"names":["GOOGLE_BOOKS_API_KEY","process","env","REACT_APP_GOOGLE_BOOKS_API_KEY","BASE_URL","normalizeBookData","apiBook","_volumeInfo$imageLink","_volumeInfo$industryI","_volumeInfo$industryI2","volumeInfo","id","title","authors","description","publishedDate","pageCount","categories","averageRating","ratingsCount","thumbnail","imageLinks","previewLink","infoLink","isbn","industryIdentifiers","identifier","searchBooks","query","maxResults","arguments","length","undefined","params","URLSearchParams","_objectSpread","q","Math","min","orderBy","printType","key","response","fetch","concat","ok","Error","status","data","json","items","filter","item","map","book","error","console","getPopularBooks","popularQueries","allBooks","books","push","log","uniqueBooks","index","self","findIndex","b","slice"],"sources":["C:/Users/T K/Desktop/personalized-book-recommendations/src/services/bookAPI.js"],"sourcesContent":["const GOOGLE_BOOKS_API_KEY = process.env.REACT_APP_GOOGLE_BOOKS_API_KEY;\r\nconst BASE_URL = 'https://www.googleapis.com/books/v1/volumes';\r\n\r\nconst normalizeBookData = (apiBook) => {\r\n  const volumeInfo = apiBook.volumeInfo || {};\r\n  \r\n  return {\r\n    id: apiBook.id,\r\n    title: volumeInfo.title || 'Unknown Title',\r\n    authors: volumeInfo.authors || ['Unknown Author'],\r\n    description: volumeInfo.description || '',\r\n    publishedDate: volumeInfo.publishedDate || '',\r\n    pageCount: volumeInfo.pageCount || 0,\r\n    categories: volumeInfo.categories || [],\r\n    averageRating: volumeInfo.averageRating || 0,\r\n    ratingsCount: volumeInfo.ratingsCount || 0,\r\n    thumbnail: volumeInfo.imageLinks?.thumbnail || null,\r\n    previewLink: volumeInfo.previewLink || '',\r\n    infoLink: volumeInfo.infoLink || '',\r\n    isbn: volumeInfo.industryIdentifiers?.[0]?.identifier || ''\r\n  };\r\n};\r\n\r\nexport const searchBooks = async (query, maxResults = 10) => {\r\n  try {\r\n    const params = new URLSearchParams({\r\n      q: query,\r\n      maxResults: Math.min(maxResults, 40),\r\n      orderBy: 'relevance',\r\n      printType: 'books',\r\n      ...(GOOGLE_BOOKS_API_KEY && { key: GOOGLE_BOOKS_API_KEY })\r\n    });\r\n\r\n    const response = await fetch(`${BASE_URL}?${params}`);\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    \r\n    if (!data.items || data.items.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return data.items\r\n      .filter(item => item.volumeInfo)\r\n      .map(item => normalizeBookData(item))\r\n      .filter(book => book.title && book.authors.length > 0);\r\n\r\n  } catch (error) {\r\n    console.error('Error searching books:', error);\r\n    throw new Error('Failed to search books. Please try again later.');\r\n  }\r\n};\r\n\r\nexport const getPopularBooks = async (maxResults = 20) => {\r\n  try {\r\n    const popularQueries = [\r\n      'bestseller fiction',\r\n      'popular books 2024',\r\n      'award winning books',\r\n      'new york times bestseller'\r\n    ];\r\n\r\n    const allBooks = [];\r\n    \r\n    for (const query of popularQueries) {\r\n      try {\r\n        const books = await searchBooks(query, 10);\r\n        allBooks.push(...books);\r\n        if (allBooks.length >= maxResults) break;\r\n      } catch (error) {\r\n        console.log(`Failed to fetch books for query: ${query}`);\r\n      }\r\n    }\r\n\r\n    const uniqueBooks = allBooks.filter((book, index, self) => \r\n      self.findIndex(b => b.id === book.id) === index\r\n    );\r\n\r\n    return uniqueBooks.slice(0, maxResults);\r\n\r\n  } catch (error) {\r\n    console.error('Error getting popular books:', error);\r\n    throw new Error('Failed to load popular books. Please try again later.');\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}