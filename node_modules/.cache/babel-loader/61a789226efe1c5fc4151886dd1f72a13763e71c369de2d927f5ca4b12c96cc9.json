{"ast":null,"code":"import{useState,useEffect}from'react';import{useBooks}from'../../contexts/BookContext';import{useUser}from'../../contexts/UserContext';import BookCard from'../../components/BookCard';import{searchBooks,getPopularBooks}from'../../services/bookAPI';import{GENRE_OPTIONS}from'../../utils/helpers';import{Sparkles,TrendingUp,RefreshCw,BookOpen,Star,Target,AlertCircle,ChevronRight,Filter,X,Home}from'lucide-react';import'./Recommendations.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Recommendations=()=>{var _preferences$genres,_preferences$authors,_preferences$genres3;const{readingList,ratings,getBookStats,selectedGenresForHome,updateHomepageGenres}=useBooks();const{preferences}=useUser();const[personalizedRecs,setPersonalizedRecs]=useState([]);const[genreRecs,setGenreRecs]=useState([]);const[trendingBooks,setTrendingBooks]=useState([]);const[selectedGenres,setSelectedGenres]=useState([]);const[activeTab,setActiveTab]=useState('for-you');const[loading,setLoading]=useState(false);const[genreLoading,setGenreLoading]=useState(false);const[error,setError]=useState(null);const stats=getBookStats();const hasPreferences=(preferences===null||preferences===void 0?void 0:(_preferences$genres=preferences.genres)===null||_preferences$genres===void 0?void 0:_preferences$genres.length)>0||(preferences===null||preferences===void 0?void 0:(_preferences$authors=preferences.authors)===null||_preferences$authors===void 0?void 0:_preferences$authors.length)>0;const hasRatings=Object.keys(ratings||{}).length>0;// Initialize selected genres from context\nuseEffect(()=>{if(selectedGenresForHome&&selectedGenresForHome.length>0){setSelectedGenres(selectedGenresForHome);}},[selectedGenresForHome]);useEffect(()=>{loadTrendingBooks();if(hasPreferences||hasRatings){loadPersonalizedRecommendations();}},[hasPreferences,hasRatings]);useEffect(()=>{if(selectedGenres.length>0){loadGenreBasedRecommendations();// Update homepage to show books from selected genres\nif(updateHomepageGenres){updateHomepageGenres(selectedGenres);}}else{setGenreRecs([]);// Clear homepage genre filter\nif(updateHomepageGenres){updateHomepageGenres([]);}}},[selectedGenres,updateHomepageGenres]);const loadTrendingBooks=async()=>{try{setLoading(true);setError(null);const trending=await getPopularBooks(12);setTrendingBooks(trending||[]);}catch(error){console.error('Error loading trending books:',error);setError('Failed to load trending books');setTrendingBooks([]);}finally{setLoading(false);}};const loadPersonalizedRecommendations=async()=>{try{var _preferences$genres2,_preferences$authors2;setLoading(true);setError(null);let recommendations=[];// Load based on user preferences\nif((preferences===null||preferences===void 0?void 0:(_preferences$genres2=preferences.genres)===null||_preferences$genres2===void 0?void 0:_preferences$genres2.length)>0){for(const genre of preferences.genres.slice(0,3)){try{const genreBooks=await searchBooks(\"subject:\".concat(genre),4);const filteredBooks=(genreBooks||[]).filter(book=>!(readingList||[]).some(rb=>rb.id===book.id));filteredBooks.forEach(book=>{book.recommendationReason=\"Because you like \".concat(genre);});recommendations=[...recommendations,...filteredBooks.slice(0,2)];}catch(error){console.error(\"Error loading \".concat(genre,\" books:\"),error);}}}// Load based on favorite authors\nif((preferences===null||preferences===void 0?void 0:(_preferences$authors2=preferences.authors)===null||_preferences$authors2===void 0?void 0:_preferences$authors2.length)>0){for(const author of preferences.authors.slice(0,2)){try{const authorBooks=await searchBooks(\"inauthor:\\\"\".concat(author,\"\\\"\"),4);const filteredBooks=(authorBooks||[]).filter(book=>!(readingList||[]).some(rb=>rb.id===book.id)&&!recommendations.some(rb=>rb.id===book.id));filteredBooks.forEach(book=>{book.recommendationReason=\"More books by \".concat(author);});recommendations=[...recommendations,...filteredBooks.slice(0,2)];}catch(error){console.error(\"Error loading books by \".concat(author,\":\"),error);}}}const uniqueRecommendations=recommendations.filter((book,index,self)=>self.findIndex(b=>b.id===book.id)===index).slice(0,12);setPersonalizedRecs(uniqueRecommendations);}catch(error){console.error('Error loading personalized recommendations:',error);setError('Failed to load personalized recommendations');setPersonalizedRecs([]);}finally{setLoading(false);}};const loadGenreBasedRecommendations=async()=>{try{setGenreLoading(true);let allGenreBooks=[];for(const genre of selectedGenres){try{// Use regular searchBooks with subject query\nconst genreBooks=await searchBooks(\"subject:\".concat(genre),8);const filteredBooks=genreBooks.filter(book=>!readingList.some(rb=>rb.id===book.id));filteredBooks.forEach(book=>{book.recommendationReason=\"\".concat(genre,\" books for you\");});allGenreBooks=[...allGenreBooks,...filteredBooks];}catch(error){console.error(\"Error loading \".concat(genre,\" books:\"),error);}}const uniqueBooks=allGenreBooks.filter((book,index,self)=>self.findIndex(b=>b.id===book.id)===index).sort(()=>Math.random()-0.5).slice(0,20);setGenreRecs(uniqueBooks);}catch(error){console.error('Error loading genre recommendations:',error);setError('Failed to load genre recommendations');}finally{setGenreLoading(false);}};const handleGenreToggle=genre=>{setSelectedGenres(prev=>{if(prev.includes(genre)){return prev.filter(g=>g!==genre);}else if(prev.length<5){return[...prev,genre];}return prev;});};const clearSelectedGenres=()=>{setSelectedGenres([]);};const handleRefreshRecommendations=()=>{if(hasPreferences||hasRatings){loadPersonalizedRecommendations();}if(selectedGenres.length>0){loadGenreBasedRecommendations();}loadTrendingBooks();};const renderEmptyState=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation-empty-state\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:64}),/*#__PURE__*/_jsx(\"h3\",{children:\"Building your recommendations...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We need a bit more information to create perfect recommendations for you!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation-tips\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Help us recommend better books:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tip-icon\",children:/*#__PURE__*/_jsx(Star,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-content\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Rate some books\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Rate books in your library to help us understand your taste\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tip-icon\",children:/*#__PURE__*/_jsx(Target,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-content\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Add favorite genres\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Update your preferences to get genre-based recommendations\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tip-icon\",children:/*#__PURE__*/_jsx(BookOpen,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tip-content\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Add more books\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Build your reading list from our book collection\"})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"setup-preferences-button\",onClick:()=>window.location.href='/profile',children:[\"Set up preferences \",/*#__PURE__*/_jsx(ChevronRight,{size:16})]})]});const renderGenreFilter=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"genre-filter-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(Filter,{size:20}),\"Choose Genres to Explore\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-actions\",children:selectedGenres.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"homepage-indicator\",children:[/*#__PURE__*/_jsx(Home,{size:16}),\"Also showing on Homepage\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"clear-filters\",onClick:clearSelectedGenres,children:[/*#__PURE__*/_jsx(X,{size:16}),\"Clear All\"]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"genre-selection-grid\",children:(GENRE_OPTIONS||[]).map(genre=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleGenreToggle(genre),className:\"genre-chip \".concat(selectedGenres.includes(genre)?'selected':''),disabled:!selectedGenres.includes(genre)&&selectedGenres.length>=5,children:genre},genre))}),selectedGenres.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-genres-display\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Showing recommendations for: \",selectedGenres.join(', ')]}),/*#__PURE__*/_jsxs(\"span\",{className:\"genre-count\",children:[\"(\",selectedGenres.length,\"/5 selected)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"homepage-sync-note\",children:[/*#__PURE__*/_jsx(Home,{size:14}),\"These genres are now featured on your Homepage\"]})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(BookOpen,{size:32}),\"Your Book Recommendations\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recommendation-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[/*#__PURE__*/_jsx(BookOpen,{size:16}),stats.totalBooks,\" books in library\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[/*#__PURE__*/_jsx(Star,{size:16}),stats.totalRated,\" books rated\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat\",children:[/*#__PURE__*/_jsx(Target,{size:16}),(preferences===null||preferences===void 0?void 0:(_preferences$genres3=preferences.genres)===null||_preferences$genres3===void 0?void 0:_preferences$genres3.length)||0,\" favorite genres\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-tabs\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab==='for-you'?'active':''),onClick:()=>setActiveTab('for-you'),children:[\"For You (\",personalizedRecs.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab==='by-genre'?'active':''),onClick:()=>setActiveTab('by-genre'),children:[\"By Genre (\",genreRecs.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab==='trending'?'active':''),onClick:()=>setActiveTab('trending'),children:[\"Trending (\",trendingBooks.length,\")\"]})]}),activeTab==='for-you'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tab-header\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"refresh-button\",onClick:handleRefreshRecommendations,disabled:loading,children:[/*#__PURE__*/_jsx(RefreshCw,{size:16,className:loading?'spinning':''}),\"Refresh Recommendations\"]})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16}),error]}),!hasPreferences&&!hasRatings||personalizedRecs.length===0?renderEmptyState():/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Sparkles,{size:24}),\"Recommended for You\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"books-grid\",children:personalizedRecs.map(book=>/*#__PURE__*/_jsx(BookCard,{book:book},book.id))})]})]}),activeTab==='by-genre'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[renderGenreFilter(),genreLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Loading \",selectedGenres.join(', '),\" books...\"]})]}):genreRecs.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Filter,{size:24}),selectedGenres.join(' & '),\" Books\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"books-grid\",children:genreRecs.map(book=>/*#__PURE__*/_jsx(BookCard,{book:book},book.id))})]}):selectedGenres.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-genre-state\",children:[/*#__PURE__*/_jsx(BookOpen,{size:48}),/*#__PURE__*/_jsx(\"h4\",{children:\"No books found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Try selecting different genres or check back later\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"select-genre-prompt\",children:[/*#__PURE__*/_jsx(Filter,{size:48}),/*#__PURE__*/_jsx(\"h4\",{children:\"Select genres to explore\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choose up to 5 genres to see personalized recommendations\"})]})]}),activeTab==='trending'&&/*#__PURE__*/_jsx(\"div\",{className:\"tab-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(TrendingUp,{size:24}),\"Trending Books\"]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading trending books...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"books-grid\",children:trendingBooks.map(book=>/*#__PURE__*/_jsx(BookCard,{book:book},book.id))})]})})]});};export default Recommendations;","map":{"version":3,"names":["useState","useEffect","useBooks","useUser","BookCard","searchBooks","getPopularBooks","GENRE_OPTIONS","Sparkles","TrendingUp","RefreshCw","BookOpen","Star","Target","AlertCircle","ChevronRight","Filter","X","Home","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Recommendations","_preferences$genres","_preferences$authors","_preferences$genres3","readingList","ratings","getBookStats","selectedGenresForHome","updateHomepageGenres","preferences","personalizedRecs","setPersonalizedRecs","genreRecs","setGenreRecs","trendingBooks","setTrendingBooks","selectedGenres","setSelectedGenres","activeTab","setActiveTab","loading","setLoading","genreLoading","setGenreLoading","error","setError","stats","hasPreferences","genres","length","authors","hasRatings","Object","keys","loadTrendingBooks","loadPersonalizedRecommendations","loadGenreBasedRecommendations","trending","console","_preferences$genres2","_preferences$authors2","recommendations","genre","slice","genreBooks","concat","filteredBooks","filter","book","some","rb","id","forEach","recommendationReason","author","authorBooks","uniqueRecommendations","index","self","findIndex","b","allGenreBooks","uniqueBooks","sort","Math","random","handleGenreToggle","prev","includes","g","clearSelectedGenres","handleRefreshRecommendations","renderEmptyState","className","children","size","onClick","window","location","href","renderGenreFilter","map","disabled","join","totalBooks","totalRated"],"sources":["C:/Users/T K/Desktop/personalized-book-recommendations/src/pages/Recommendations/index.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useBooks } from '../../contexts/BookContext';\r\nimport { useUser } from '../../contexts/UserContext';\r\nimport BookCard from '../../components/BookCard';\r\nimport { searchBooks, getPopularBooks } from '../../services/bookAPI';\r\nimport { GENRE_OPTIONS } from '../../utils/helpers';\r\nimport { \r\n  Sparkles, \r\n  TrendingUp, \r\n  RefreshCw, \r\n  BookOpen, \r\n  Star, \r\n  Target,\r\n  AlertCircle,\r\n  ChevronRight,\r\n  Filter,\r\n  X,\r\n  Home\r\n} from 'lucide-react';\r\nimport './Recommendations.css';\r\n\r\nconst Recommendations = () => {\r\n  const { \r\n    readingList, \r\n    ratings, \r\n    getBookStats, \r\n    selectedGenresForHome, \r\n    updateHomepageGenres \r\n  } = useBooks();\r\n  const { preferences } = useUser();\r\n  \r\n  const [personalizedRecs, setPersonalizedRecs] = useState([]);\r\n  const [genreRecs, setGenreRecs] = useState([]);\r\n  const [trendingBooks, setTrendingBooks] = useState([]);\r\n  const [selectedGenres, setSelectedGenres] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('for-you');\r\n  const [loading, setLoading] = useState(false);\r\n  const [genreLoading, setGenreLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const stats = getBookStats();\r\n  const hasPreferences = (preferences?.genres?.length > 0) || (preferences?.authors?.length > 0);\r\n  const hasRatings = Object.keys(ratings || {}).length > 0;\r\n\r\n  // Initialize selected genres from context\r\n  useEffect(() => {\r\n    if (selectedGenresForHome && selectedGenresForHome.length > 0) {\r\n      setSelectedGenres(selectedGenresForHome);\r\n    }\r\n  }, [selectedGenresForHome]);\r\n\r\n  useEffect(() => {\r\n    loadTrendingBooks();\r\n    if (hasPreferences || hasRatings) {\r\n      loadPersonalizedRecommendations();\r\n    }\r\n  }, [hasPreferences, hasRatings]);\r\n\r\n  useEffect(() => {\r\n    if (selectedGenres.length > 0) {\r\n      loadGenreBasedRecommendations();\r\n      // Update homepage to show books from selected genres\r\n      if (updateHomepageGenres) {\r\n        updateHomepageGenres(selectedGenres);\r\n      }\r\n    } else {\r\n      setGenreRecs([]);\r\n      // Clear homepage genre filter\r\n      if (updateHomepageGenres) {\r\n        updateHomepageGenres([]);\r\n      }\r\n    }\r\n  }, [selectedGenres, updateHomepageGenres]);\r\n\r\n  const loadTrendingBooks = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const trending = await getPopularBooks(12);\r\n      setTrendingBooks(trending || []);\r\n    } catch (error) {\r\n      console.error('Error loading trending books:', error);\r\n      setError('Failed to load trending books');\r\n      setTrendingBooks([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadPersonalizedRecommendations = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      let recommendations = [];\r\n\r\n      // Load based on user preferences\r\n      if (preferences?.genres?.length > 0) {\r\n        for (const genre of preferences.genres.slice(0, 3)) {\r\n          try {\r\n            const genreBooks = await searchBooks(`subject:${genre}`, 4);\r\n            const filteredBooks = (genreBooks || []).filter(book => \r\n              !(readingList || []).some(rb => rb.id === book.id)\r\n            );\r\n            \r\n            filteredBooks.forEach(book => {\r\n              book.recommendationReason = `Because you like ${genre}`;\r\n            });\r\n            \r\n            recommendations = [...recommendations, ...filteredBooks.slice(0, 2)];\r\n          } catch (error) {\r\n            console.error(`Error loading ${genre} books:`, error);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Load based on favorite authors\r\n      if (preferences?.authors?.length > 0) {\r\n        for (const author of preferences.authors.slice(0, 2)) {\r\n          try {\r\n            const authorBooks = await searchBooks(`inauthor:\"${author}\"`, 4);\r\n            const filteredBooks = (authorBooks || []).filter(book => \r\n              !(readingList || []).some(rb => rb.id === book.id) &&\r\n              !recommendations.some(rb => rb.id === book.id)\r\n            );\r\n            \r\n            filteredBooks.forEach(book => {\r\n              book.recommendationReason = `More books by ${author}`;\r\n            });\r\n            \r\n            recommendations = [...recommendations, ...filteredBooks.slice(0, 2)];\r\n          } catch (error) {\r\n            console.error(`Error loading books by ${author}:`, error);\r\n          }\r\n        }\r\n      }\r\n\r\n      const uniqueRecommendations = recommendations\r\n        .filter((book, index, self) => self.findIndex(b => b.id === book.id) === index)\r\n        .slice(0, 12);\r\n\r\n      setPersonalizedRecs(uniqueRecommendations);\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading personalized recommendations:', error);\r\n      setError('Failed to load personalized recommendations');\r\n      setPersonalizedRecs([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\nconst loadGenreBasedRecommendations = async () => {\r\n  try {\r\n    setGenreLoading(true);\r\n    let allGenreBooks = [];\r\n\r\n    for (const genre of selectedGenres) {\r\n      try {\r\n        // Use regular searchBooks with subject query\r\n        const genreBooks = await searchBooks(`subject:${genre}`, 8);\r\n        const filteredBooks = genreBooks.filter(book => \r\n          !readingList.some(rb => rb.id === book.id)\r\n        );\r\n        \r\n        filteredBooks.forEach(book => {\r\n          book.recommendationReason = `${genre} books for you`;\r\n        });\r\n        \r\n        allGenreBooks = [...allGenreBooks, ...filteredBooks];\r\n      } catch (error) {\r\n        console.error(`Error loading ${genre} books:`, error);\r\n      }\r\n    }\r\n\r\n    const uniqueBooks = allGenreBooks\r\n      .filter((book, index, self) => self.findIndex(b => b.id === book.id) === index)\r\n      .sort(() => Math.random() - 0.5)\r\n      .slice(0, 20);\r\n\r\n    setGenreRecs(uniqueBooks);\r\n    \r\n  } catch (error) {\r\n    console.error('Error loading genre recommendations:', error);\r\n    setError('Failed to load genre recommendations');\r\n  } finally {\r\n    setGenreLoading(false);\r\n  }\r\n};\r\n  const handleGenreToggle = (genre) => {\r\n    setSelectedGenres(prev => {\r\n      if (prev.includes(genre)) {\r\n        return prev.filter(g => g !== genre);\r\n      } else if (prev.length < 5) {\r\n        return [...prev, genre];\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  const clearSelectedGenres = () => {\r\n    setSelectedGenres([]);\r\n  };\r\n\r\n  const handleRefreshRecommendations = () => {\r\n    if (hasPreferences || hasRatings) {\r\n      loadPersonalizedRecommendations();\r\n    }\r\n    if (selectedGenres.length > 0) {\r\n      loadGenreBasedRecommendations();\r\n    }\r\n    loadTrendingBooks();\r\n  };\r\n\r\n  const renderEmptyState = () => (\r\n    <div className=\"recommendation-empty-state\">\r\n      <AlertCircle size={64} />\r\n      <h3>Building your recommendations...</h3>\r\n      <p>We need a bit more information to create perfect recommendations for you!</p>\r\n      \r\n      <div className=\"recommendation-tips\">\r\n        <h4>Help us recommend better books:</h4>\r\n        \r\n        <div className=\"tip-item\">\r\n          <div className=\"tip-icon\">\r\n            <Star size={24} />\r\n          </div>\r\n          <div className=\"tip-content\">\r\n            <h5>Rate some books</h5>\r\n            <p>Rate books in your library to help us understand your taste</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"tip-item\">\r\n          <div className=\"tip-icon\">\r\n            <Target size={24} />\r\n          </div>\r\n          <div className=\"tip-content\">\r\n            <h5>Add favorite genres</h5>\r\n            <p>Update your preferences to get genre-based recommendations</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"tip-item\">\r\n          <div className=\"tip-icon\">\r\n            <BookOpen size={24} />\r\n          </div>\r\n          <div className=\"tip-content\">\r\n            <h5>Add more books</h5>\r\n            <p>Build your reading list from our book collection</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <button \r\n        className=\"setup-preferences-button\"\r\n        onClick={() => window.location.href = '/profile'}\r\n      >\r\n        Set up preferences <ChevronRight size={16} />\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  const renderGenreFilter = () => (\r\n    <div className=\"genre-filter-section\">\r\n      <div className=\"filter-header\">\r\n        <h4>\r\n          <Filter size={20} />\r\n          Choose Genres to Explore\r\n        </h4>\r\n        <div className=\"filter-actions\">\r\n          {selectedGenres.length > 0 && (\r\n            <>\r\n              <span className=\"homepage-indicator\">\r\n                <Home size={16} />\r\n                Also showing on Homepage\r\n              </span>\r\n              <button className=\"clear-filters\" onClick={clearSelectedGenres}>\r\n                <X size={16} />\r\n                Clear All\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"genre-selection-grid\">\r\n        {(GENRE_OPTIONS || []).map((genre) => (\r\n          <button\r\n            key={genre}\r\n            onClick={() => handleGenreToggle(genre)}\r\n            className={`genre-chip ${selectedGenres.includes(genre) ? 'selected' : ''}`}\r\n            disabled={!selectedGenres.includes(genre) && selectedGenres.length >= 5}\r\n          >\r\n            {genre}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      \r\n      {selectedGenres.length > 0 && (\r\n        <div className=\"selected-genres-display\">\r\n          <p>Showing recommendations for: {selectedGenres.join(', ')}</p>\r\n          <span className=\"genre-count\">({selectedGenres.length}/5 selected)</span>\r\n          <div className=\"homepage-sync-note\">\r\n            <Home size={14} />\r\n            These genres are now featured on your Homepage\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"recommendations-page\">\r\n      <div className=\"recommendations-header\">\r\n        <h2>\r\n          <BookOpen size={32} />\r\n          Your Book Recommendations\r\n        </h2>\r\n        \r\n        <div className=\"recommendation-stats\">\r\n          <span className=\"stat\">\r\n            <BookOpen size={16} />\r\n            {stats.totalBooks} books in library\r\n          </span>\r\n          <span className=\"stat\">\r\n            <Star size={16} />\r\n            {stats.totalRated} books rated\r\n          </span>\r\n          <span className=\"stat\">\r\n            <Target size={16} />\r\n            {preferences?.genres?.length || 0} favorite genres\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"recommendations-tabs\">\r\n        <button \r\n          className={`tab-button ${activeTab === 'for-you' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('for-you')}\r\n        >\r\n          For You ({personalizedRecs.length})\r\n        </button>\r\n        <button \r\n          className={`tab-button ${activeTab === 'by-genre' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('by-genre')}\r\n        >\r\n          By Genre ({genreRecs.length})\r\n        </button>\r\n        <button \r\n          className={`tab-button ${activeTab === 'trending' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('trending')}\r\n        >\r\n          Trending ({trendingBooks.length})\r\n        </button>\r\n      </div>\r\n\r\n      {activeTab === 'for-you' && (\r\n        <div className=\"tab-content\">\r\n          <div className=\"tab-header\">\r\n            <button \r\n              className=\"refresh-button\"\r\n              onClick={handleRefreshRecommendations}\r\n              disabled={loading}\r\n            >\r\n              <RefreshCw size={16} className={loading ? 'spinning' : ''} />\r\n              Refresh Recommendations\r\n            </button>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"error-message\">\r\n              <AlertCircle size={16} />\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {(!hasPreferences && !hasRatings) || personalizedRecs.length === 0 ? (\r\n            renderEmptyState()\r\n          ) : (\r\n            <div className=\"recommendations-section\">\r\n              <h3>\r\n                <Sparkles size={24} />\r\n                Recommended for You\r\n              </h3>\r\n              <div className=\"books-grid\">\r\n                {personalizedRecs.map((book) => (\r\n                  <BookCard key={book.id} book={book} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'by-genre' && (\r\n        <div className=\"tab-content\">\r\n          {renderGenreFilter()}\r\n          \r\n          {genreLoading ? (\r\n            <div className=\"loading-state\">\r\n              <div className=\"spinner\"></div>\r\n              <p>Loading {selectedGenres.join(', ')} books...</p>\r\n            </div>\r\n          ) : genreRecs.length > 0 ? (\r\n            <div className=\"recommendations-section\">\r\n              <h3>\r\n                <Filter size={24} />\r\n                {selectedGenres.join(' & ')} Books\r\n              </h3>\r\n              <div className=\"books-grid\">\r\n                {genreRecs.map((book) => (\r\n                  <BookCard key={book.id} book={book} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ) : selectedGenres.length > 0 ? (\r\n            <div className=\"empty-genre-state\">\r\n              <BookOpen size={48} />\r\n              <h4>No books found</h4>\r\n              <p>Try selecting different genres or check back later</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"select-genre-prompt\">\r\n              <Filter size={48} />\r\n              <h4>Select genres to explore</h4>\r\n              <p>Choose up to 5 genres to see personalized recommendations</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'trending' && (\r\n        <div className=\"tab-content\">\r\n          <div className=\"recommendations-section\">\r\n            <h3>\r\n              <TrendingUp size={24} />\r\n              Trending Books\r\n            </h3>\r\n            {loading ? (\r\n              <div className=\"loading-state\">\r\n                <div className=\"spinner\"></div>\r\n                <p>Loading trending books...</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"books-grid\">\r\n                {trendingBooks.map((book) => (\r\n                  <BookCard key={book.id} book={book} />\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Recommendations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}